<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Vessel Dashboard</title>
    <link rel="stylesheet" href="/static/css/style2.css">
</head>
<body>
    <div class="container">
        <!-- Sidebar -->
        <div class="sidebar">
            <h2>Arkas Line Operational Excellence</h2>
            <ul>
                
        <li><a href="./"><span class="icon"><ion-icon name="home-outline"></ion-icon></span><span class="title">Dashboard</span></a></li>
        <li><a href="./ets.html"><span class="icon"><ion-icon name="people-outline"></ion-icon></span><span class="title">ETS</span></a></li>
        <li><a href="./input.html"><span class="icon"><ion-icon name="chatbubble-outline"></ion-icon></span><span class="title">input</span></a></li>
        <li><a href="#"><span class="icon"><ion-icon name="help-outline"></ion-icon></span><span class="title">Help</span></a></li>
        <li><a href="#"><span class="icon"><ion-icon name="settings-outline"></ion-icon></span><span class="title">Settings</span></a></li>
        <li><a href="#"><span class="icon"><ion-icon name="lock-closed-outline"></ion-icon></span><span class="title">Password</span></a></li>
        <li><a href="#"><span class="icon"><ion-icon name="log-out-outline"></ion-icon></span><span class="title">Sign Out</span></a></li>
            </ul>
        </div>

        <!-- Main Content -->
        <div class="main-content">
            <!-- Top Metrics -->
            <div class="metrics">
                <div class="metric-item">
                    <h3>Total Consumption</h3>
                    <p id="Consumption"></p>
                </div>
                <div class="metric-item">
                    <h3>Compliance Balance</h3>
                    <p id="balance"></p>
                </div>
                <div class="metric-item">
                    <h3>GHG Intensity</h3>
                    <p id="GHG"></p>
                </div>
                <div class="metric-item">
                    <h3>FuelEU Cost</h3>
                    <p id="fuel-eu-cost">Yükleniyor...</p>
                </div>
                
                <script>
                  // Sunucudan FuelEU Cost verisini almak ve HTML'e eklemek
                  fetch('http://localhost:3000/sefer-fuel-toplami')
                    .then(response => response.json())
                    .then(data => {
                      // FuelEU toplamını sayfaya direkt ekle
                      document.getElementById('fuel-eu-cost').textContent = data.totalFuel.toLocaleString('en-US');
                    })
                    .catch(error => {
                      console.error("FuelEU verisi alınırken hata:", error);
                      document.getElementById('fuel-ets-cost').textContent = "Veri alınamadı";
                    });
                    fetch('http://localhost:3000/sefer-ets-toplami')
                    .then(response => response.json())
                    .then(data => {
                      // FuelEU toplamını sayfaya direkt ekle
                      document.getElementById('ets-cost').textContent = data.totalFuel.toLocaleString('en-US');
                    })
                    .catch(error => {
                      console.error("FuelEU verisi alınırken hata:", error);
                      document.getElementById('ets-cost').textContent = "Veri alınamadı";
                    });
                    fetch('http://localhost:3000/sefer-consumption-toplami')
                    .then(response => response.json())
                    .then(data => {
                      // FuelEU toplamını sayfaya direkt ekle
                      document.getElementById('Consumption').textContent = data.totalFuel.toLocaleString('en-US');
                    })
                    .catch(error => {
                      console.error("FuelEU verisi alınırken hata:", error);
                      document.getElementById('Consumption').textContent = "Veri alınamadı";
                    });
                    fetch('http://localhost:3000/sefer-balance-toplami')
                    .then(response => response.json())
                    .then(data => {
                      // FuelEU toplamını sayfaya direkt ekle
                      document.getElementById('balance').textContent = data.totalFuel.toLocaleString('en-US');
                    })
                    .catch(error => {
                      console.error("FuelEU verisi alınırken hata:", error);
                      document.getElementById('balance').textContent = "Veri alınamadı";
                    });
                    fetch('http://localhost:3000/sefer-ghg-toplami')
                    .then(response => response.json())
                    .then(data => {
                      // FuelEU toplamını sayfaya direkt ekle
                      document.getElementById('ghg').textContent = data.totalFuel.toLocaleString('en-US');
                    })
                    .catch(error => {
                      console.error("FuelEU verisi alınırken hata:", error);
                      document.getElementById('ghg').textContent = "Veri alınamadı";
                    });
                    fetch('/sefer-table-toplami')
            .then(response => response.json())
            .then(data => {
                const tbody = document.getElementById('ghg-data');
                data.totalData.forEach(row => {
                    const tr = document.createElement('tr');

                    tr.innerHTML = `
                        <td>${row.table}</td>
                        <td>${row.ghg_sum.toFixed(2)}</td>
                        <td>${row.sea_fuel_sum}</td>
                        <td>${row.eca_fuel_sum}</td>
                        <td>${row.port_fuel_sum}</td>
                    `;
                    tbody.appendChild(tr);
                });
            })
            .catch(error => {
                console.error('Hata:', error);
            });
                    
                </script>
                
                <div class="metric-item">
                    <h3>ETS Cost</h3>
                    <p id="ets-cost">$0.00</p>
                
            </div>

            <!-- Vessels Table -->
            
    <table>
        <thead>
            <tr>
                <th>Table</th>
                <th>GHG </th>
                <th>Sea Fuel</th>
                <th>ECA Fuel</th>
                <th>Port Fuel</th>
            </tr>
        </thead>
        <tbody id="ghg-data">
            <!-- Veriler buraya JavaScript ile eklenecek -->
        </tbody>
    </table>

            <!-- Graph Section -->
            <div class="graphs">
                <div class="graph-item">
                    <h4>ETS</h4>
                    <div class="graph-placeholder"></div>
                </div>
                <div class="graph-item">
                    <h4>CO2 Emissions</h4>
                    <div class="graph-placeholder"></div>
                </div>
                <div class="graph-item">
                    <h4>Fuel Consumption</h4>
                    <div class="graph-placeholder"></div>
                </div>
                <div class="graph-item">
                    <h4>Carbon Footprint</h4>
                    <div class="graph-placeholder"></div>
                </div>
            </div>
        </div>
    </div>
</body>
</html>
